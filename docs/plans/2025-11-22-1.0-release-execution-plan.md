# Difflicious 1.0 Release Execution Plan

**Date Created:** 2025-11-22
**Target Release:** 1.0.0
**Current Version:** 0.9.2
**Branch:** `claude/difflicious-1.0-release-0135ozM5aXJSzs4Y8py3PTTT`

## Executive Summary

This document provides a step-by-step execution plan for completing the difflicious 1.0 release. The plan focuses on MUST FIX (blockers) and SHOULD FIX (high-value improvements) items that are user-facing and critical for a production-ready 1.0 release.

**Scope:** Housekeeping, documentation sync, theme refinement, and final polish.
**Estimated Total Effort:** 10-15 hours
**Out of Scope:** Large refactorings (JavaScript modularization, Alpine.js migration) - deferred to 1.1+

---

## Phase 1: Critical Housekeeping (MUST FIX)

### Task 1.1: Remove FIXME Comment in CSS

**Priority:** MUST FIX
**File:** `src/difflicious/static/css/styles.css:1034`
**Issue:** Production code contains FIXME comment about problematic CSS

**Current Code:**
```css
.file-header .font-mono {
    /* FIXME: Unsure where these came from, but they suck
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    */
    display: block !important;
    min-width: 0 !important;
}
```

**Action Steps:**
1. Read `src/difflicious/static/css/styles.css` around line 1034
2. Determine if commented CSS is needed or can be removed
3. If not needed: Remove entire FIXME comment and commented CSS
4. If needed: Uncomment and remove FIXME, or document why it's there
5. Test file header display in both light and dark mode
6. Run `pnpm run tailwind:build` to rebuild CSS if input file changed
7. Verify no visual regressions

**Success Criteria:**
- No FIXME comments in `styles.css`
- File headers display correctly
- Tailwind CSS rebuilt successfully

---

### Task 1.2: Consolidate Test Files to tests/ Directory

**Priority:** MUST FIX
**Files:** Root directory has 6 misplaced test files
**Issue:** Test files in root directory instead of `tests/` - confusing structure, some may not run

**Files to Move:**
- `test_api.py` ‚Üí `tests/integration/test_api.py`
- `test_api_detailed.py` ‚Üí `tests/integration/test_api_detailed.py`
- `test_frontend.py` ‚Üí `tests/integration/test_frontend.py`
- `test_parser.py` ‚Üí `tests/unit/test_parser.py`
- `test_side_by_side.py` ‚Üí `tests/unit/test_diff_parser_side_by_side.py`
- `test_rendering_parser.py` ‚Üí `tests/unit/test_diff_rendering.py`

**Action Steps:**
1. Create `tests/unit/` and `tests/integration/` directories if they don't exist
2. Move each file to appropriate location (see mapping above)
3. Update any imports that reference these test files
4. Delete original files from root directory
5. Run `./cilicious.sh` to verify all tests still pass
6. Update pytest configuration in `pyproject.toml` if needed

**Success Criteria:**
- No test files in root directory
- All tests pass via `./cilicious.sh`
- Test discovery works correctly
- No import errors

---

### Task 1.3: Remove or Complete TODO Comments in JavaScript

**Priority:** MUST FIX
**File:** `src/difflicious/static/js/main.js:41,82`
**Issue:** TODO comments indicate incomplete migration work

**Current Code:**
```javascript
// Line 41:
// TODO: Migrate remaining DiffState functionality to Alpine.js components

// Line 82:
// TODO: Migrate these remaining functions to Alpine components
```

**Action Steps:**
1. Read `src/difflicious/static/js/main.js`
2. Read `src/difflicious/static/js/app.js` to understand Alpine.js status
3. Determine current framework strategy:
   - **Option A:** If Alpine.js is not actively used, remove TODO and document that vanilla JS is the current approach
   - **Option B:** If Alpine.js migration is planned, update TODO to be specific about what's left
4. If removing TODOs, update comments to explain current architecture decision
5. Verify application still works in browser
6. Run `pnpm run lint:js` to check JavaScript linting

**Success Criteria:**
- No TODO comments in production JavaScript
- Clear documentation of framework approach
- Application functions correctly
- JavaScript linting passes

---

### Task 1.4: Synchronize Documentation Files

**Priority:** MUST FIX
**Files:** `PLAN.md`, `README.md`, `CLAUDE.md`
**Issue:** Documentation files tell different stories about project status

**Specific Issues:**
1. **PLAN.md** shows completed features as "‚è∏Ô∏è" (paused)
2. **README.md** line 57 contains "xoxo" instead of actual content
3. **README.md** "Coming Soon" section lists features that exist
4. **README.md** claims syntax highlighting is "coming" but Pygments is implemented

**Action Steps:**

**Step 1: Fix README.md Critical Issues**
1. Read `README.md` line 57 - fix "xoxo" placeholder
2. Review "Coming Soon" section (lines 140-146)
3. Move completed features from "Coming Soon" to "Features" section
4. Update any inaccurate feature descriptions
5. Verify installation instructions are accurate

**Step 2: Update PLAN.md**
1. Read `PLAN.md` in full
2. Change all "‚è∏Ô∏è" to "‚úÖ" for completed Phase 1 items
3. Update "Current Status" section to reflect 0.9.2 ‚Üí 1.0 transition
4. Add note that document is historical reference, not active roadmap

**Step 3: Verify CLAUDE.md Accuracy**
1. Read `CLAUDE.md` in full
2. Confirm it accurately reflects current architecture
3. Update any outdated information
4. Add note about 1.0 release status

**Success Criteria:**
- No placeholder text ("xoxo") in README.md
- README.md accurately describes current features
- PLAN.md reflects actual completion status
- All three docs are consistent about what's implemented
- Installation instructions are accurate and tested

---

### Task 1.5: Update pyproject.toml Metadata for 1.0

**Priority:** MUST FIX
**File:** `pyproject.toml`
**Issue:** Development status and metadata need updating for 1.0 release

**Current Issues:**
- Line 15: `"Development Status :: 3 - Alpha"` - should be Beta or Stable
- Line 12: `email = "noreply@example.com"` - placeholder email

**Action Steps:**
1. Read `pyproject.toml`
2. Change development status from "3 - Alpha" to "4 - Beta" or "5 - Production/Stable"
3. Update author email to real email or remove if not applicable
4. Review and update keywords if needed (line 26)
5. Verify package description is accurate (line 8)
6. Check Python version requirements are correct (line 27)

**Decision Point:** Alpha vs Beta vs Stable?
- **Recommendation:** Use "4 - Beta" for 1.0.0 initial release
- Can upgrade to "5 - Production/Stable" for 1.0.1+ after user feedback

**Success Criteria:**
- Development status updated to at least Beta
- No placeholder email addresses
- All metadata accurately describes the package
- Package builds successfully with `uv build`

---

## Phase 2: Theme Refinement (SHOULD FIX)

### Task 2.1: Improve Light Mode Diff Colors

**Priority:** SHOULD FIX
**File:** `src/difflicious/static/css/styles.css`
**Issue:** Diff addition/deletion colors are too harsh and saturated (Tailwind 200-level)

**Current Colors:**
```css
--diff-addition-bg: #bbf7d0;          /* green-200 - very bright lime */
--diff-addition-text: #059669;        /* green-600 */
--diff-deletion-bg: #fecaca;          /* red-200 - very bright pink-red */
--diff-deletion-text: #dc2626;        /* red-600 */
```

**Proposed Changes:**
```css
/* Softer, more pleasant colors - use 100-level */
--diff-addition-bg: #dcfce7;          /* green-100: softer, less intense */
--diff-addition-text: #059669;        /* green-600: keep same for contrast */
--diff-deletion-bg: #fee2e2;          /* red-100: softer, less pink */
--diff-deletion-text: #dc2626;        /* red-600: keep same for contrast */
```

**Action Steps:**
1. Read `:root` section in `src/difflicious/static/css/styles.css`
2. Find `--diff-addition-bg` and `--diff-deletion-bg` variables
3. Update values to proposed softer colors (green-100, red-100)
4. Keep text colors the same for contrast
5. Rebuild Tailwind CSS: `pnpm run tailwind:build`
6. Test in browser with real diff content
7. Compare before/after screenshots
8. Adjust if needed based on visual review

**Testing Checklist:**
- [ ] Additions are easily distinguishable from deletions
- [ ] Colors are pleasant and not harsh
- [ ] Text is readable on new backgrounds
- [ ] Line numbers are still visible
- [ ] Colors work with syntax highlighting

**Success Criteria:**
- Diff colors are softer and more pleasant
- Readability maintained or improved
- User feedback is positive
- No accessibility regressions

---

### Task 2.2: Improve Dark Mode Contrast and Visibility

**Priority:** SHOULD FIX
**File:** `src/difflicious/static/css/styles.css`
**Issue:** Dark mode has low contrast, muddy diff colors, invisible borders, context too dark

**Current Issues:**
1. Diff backgrounds are muddy and low saturation
2. Context background (#020408) is nearly black - content disappears
3. Borders (#334155) barely visible against backgrounds
4. Overall palette is very dark

**Proposed Changes:**

```css
[data-theme="dark"] {
    /* Lighten surface tertiary for better hierarchy */
    --surface-tertiary: #475569;         /* LIGHTEN from #334155 to slate-600 */

    /* More saturated, distinguishable diff backgrounds */
    --diff-addition-bg: #1a3a2a;         /* Richer green, more saturation */
    --diff-addition-text: #6ee7b7;       /* Soften from #4ade80 to green-300 */
    --diff-deletion-bg: #3a1a1a;         /* Richer red, less purple */
    --diff-deletion-text: #fca5a5;       /* Keep same (red-300) */

    /* Make context more visible */
    --diff-context-bg: #0f172a;          /* Same as surface-primary, not darker */
    --diff-context-text: #94a3b8;        /* Keep same */

    /* Increase border visibility */
    --border-default: #475569;           /* LIGHTEN from #334155 to slate-600 */
    --border-strong: #64748b;            /* LIGHTEN from #475569 to slate-500 */
}
```

**Action Steps:**
1. Read `[data-theme="dark"]` section in styles.css (starts around line 218)
2. Update `--surface-tertiary` to lighter value
3. Update diff background colors to more saturated values
4. Soften diff text colors slightly
5. Change `--diff-context-bg` from #020408 to #0f172a
6. Lighten border colors for visibility
7. Rebuild Tailwind: `pnpm run tailwind:build`
8. Test extensively in dark mode
9. Compare with GitHub/GitLab dark modes for reference

**Testing Checklist:**
- [ ] Diff additions clearly visible and distinguishable
- [ ] Diff deletions clearly visible and distinguishable
- [ ] Context lines visible and readable
- [ ] Borders visible between UI elements
- [ ] Overall theme not too dark or too light
- [ ] Text contrast ratios meet WCAG AA standards
- [ ] Syntax highlighting still works well

**Success Criteria:**
- Dark mode has improved contrast
- Diff colors are rich and distinguishable
- Context lines are visible
- Borders are visible
- Overall aesthetic is pleasant
- No accessibility regressions

---

### Task 2.3: Test Both Themes Side-by-Side

**Priority:** SHOULD FIX
**Dependencies:** Tasks 2.1 and 2.2 must be complete
**Issue:** Need to verify theme changes work well in both modes

**Action Steps:**
1. Start difflicious in development mode: `uv run difflicious`
2. Navigate to a repository with actual diff content
3. Open browser DevTools
4. Take screenshots of key UI elements in light mode:
   - File list with additions/deletions
   - Diff hunks with context
   - Expanded context
   - File headers
   - Buttons and controls
5. Switch to dark mode
6. Take same screenshots in dark mode
7. Compare side-by-side:
   - Is contrast good in both?
   - Are colors pleasant in both?
   - Is text readable in both?
   - Are borders visible in both?
8. Make adjustments if needed
9. Repeat until satisfied

**Success Criteria:**
- Both themes are pleasant and readable
- No jarring color transitions when switching
- Consistent visual hierarchy in both modes
- All UI elements visible in both modes

---

### Task 2.4: Document Color System Changes

**Priority:** SHOULD FIX
**Files:** `docs/CSS-STYLE-GUIDE.md`, update color audit
**Issue:** Color changes need to be documented for future reference

**Action Steps:**
1. Read `docs/CSS-STYLE-GUIDE.md`
2. Update examples to reflect new color values
3. Add notes about 1.0 color refinements
4. Update `docs/internal/reports/2025-11-05-2019-color-audit.md` or create new audit
5. Document rationale for color choices
6. Add before/after examples if helpful

**Success Criteria:**
- CSS Style Guide reflects current colors
- Color decisions are documented
- Future contributors understand color system

---

## Phase 3: Final Polish (SHOULD FIX)

### Task 3.1: Clarify Alpine.js Usage or Remove Dead Code

**Priority:** SHOULD FIX
**File:** `src/difflicious/static/js/app.js` (1,005 lines)
**Issue:** Large Alpine.js file may be unused - replaced by vanilla JS in diff-interactions.js

**Action Steps:**
1. Read `src/difflicious/static/js/app.js` in full
2. Read `src/difflicious/static/js/diff-interactions.js` to compare
3. Check which file is actually loaded in `src/difflicious/templates/base.html`
4. Test application with and without app.js to confirm if it's used
5. **Decision Point:**
   - **If app.js is unused:** Delete it entirely
   - **If app.js is partially used:** Document which parts are active
   - **If both are used:** Document the separation of concerns

**If Deleting app.js:**
1. Remove file
2. Update base.html to remove any references
3. Test full application functionality
4. Run `pnpm run lint:js`
5. Update documentation to clarify vanilla JS is the approach

**Success Criteria:**
- No dead code in codebase
- Clear documentation of JavaScript architecture
- Application works correctly
- No confusion about framework usage

---

### Task 3.2: Add Basic First-Run Experience Improvements

**Priority:** SHOULD FIX
**File:** `src/difflicious/cli.py` or `src/difflicious/app.py`
**Issue:** No helpful messaging when not in a git repository

**Current Behavior:**
- User runs `difflicious` outside git repo ‚Üí unclear error or crash

**Desired Behavior:**
- Clear, helpful error message
- Guidance on how to use difflicious

**Action Steps:**
1. Test current behavior when running outside git repo
2. Add check in CLI or app startup:
   ```python
   if not is_git_repository(os.getcwd()):
       print("Error: Difflicious must be run from within a git repository.")
       print("Navigate to a git repository and try again.")
       sys.exit(1)
   ```
3. Consider adding a welcome message on first successful run
4. Test error messaging
5. Update documentation with troubleshooting info

**Success Criteria:**
- Clear error when not in git repo
- User knows how to fix the issue
- No confusing stack traces
- Professional first impression

---

### Task 3.3: Review and Clean Backwards Compatibility Code

**Priority:** SHOULD FIX (Optional)
**Files:** `src/difflicious/static/css/styles.css`, `src/difflicious/app.py`
**Issue:** Multiple "kept for backward compatibility" comments

**Current Locations:**
- `styles.css:116-212` - Legacy CSS variable mappings
- `app.py:39,41,72,88` - Deprecated environment variables

**Action Steps:**
1. Review each "backward compatibility" comment
2. Determine if compatibility is still needed
3. **Decision Point for 1.0:**
   - **Keep:** If users rely on old variable names, keep for 1.0
   - **Remove:** If no users yet (pre-1.0), clean it up now
   - **Deprecate:** Add deprecation warnings for 1.0, remove in 2.0

**Recommendation:**
- **Keep CSS variable backwards compat** - templates may use old names
- **Add deprecation warnings** for old env vars - remove in 1.1
- **Document** what's deprecated in CHANGELOG.md

**Success Criteria:**
- Decision made on each backward compat item
- Deprecation warnings added if keeping
- Documentation updated
- No surprise breaks for existing users

---

## Phase 4: Version Bump and Release Preparation

### Task 4.1: Update Version to 1.0.0

**Priority:** MUST FIX (Final Step)
**Files:** `src/difflicious/__init__.py`, `pyproject.toml`
**Issue:** Version needs to be bumped from 0.9.2 to 1.0.0

**Action Steps:**
1. Read `src/difflicious/__init__.py` - verify current version
2. Update `__version__ = "1.0.0"`
3. Verify `pyproject.toml` uses dynamic versioning from __init__.py
4. Update version in any other locations if needed
5. Commit version bump separately: `git commit -m "Bump version to 1.0.0"`

**Success Criteria:**
- Version is 1.0.0 in all locations
- Package builds with correct version
- Git tag will match version

---

### Task 4.2: Update CHANGELOG.md for 1.0 Release

**Priority:** MUST FIX (Final Step)
**File:** `CHANGELOG.md`
**Issue:** Need comprehensive 1.0 release notes

**Action Steps:**
1. Read current `CHANGELOG.md`
2. Add new section for [1.0.0] at the top
3. Document all changes from this execution plan:
   - Housekeeping improvements
   - Theme refinements
   - Documentation updates
   - Any bug fixes
4. Write release notes explaining 1.0 milestone
5. Update "Future Releases" section
6. Verify all dates are correct

**Template:**
```markdown
## [1.0.0] - 2025-11-22

### üéâ Initial Stable Release

Difflicious 1.0 represents the first production-ready release, focusing on polish, consistency, and user experience.

### Improvements
- **Theme Refinement** - Softer, more pleasant light mode diff colors
- **Theme Refinement** - Improved dark mode contrast and visibility
- **Documentation** - Synchronized all documentation files
- **Code Quality** - Removed FIXME/TODO comments
- **Testing** - Consolidated test files into proper structure
- **Metadata** - Updated package metadata for production readiness

### Bug Fixes
- Fixed FIXME comment in CSS
- Fixed placeholder text in README.md
- Improved error messaging when not in git repository

### Documentation
- Updated README.md with accurate feature list
- Synchronized PLAN.md with actual project status
- Added 1.0 release execution plan

---
```

**Success Criteria:**
- CHANGELOG has complete 1.0 entry
- All changes documented
- Release notes are clear and comprehensive
- Dates are accurate

---

### Task 4.3: Final Quality Check - Run cilicious.sh

**Priority:** MUST FIX (Final Step)
**File:** `./cilicious.sh`
**Issue:** All tests and linting must pass clean before release

**Action Steps:**
1. Run `./cilicious.sh` from repository root
2. Verify all checks pass:
   - JavaScript tests (pnpm run test:js)
   - JavaScript linting (pnpm run lint:js)
   - Python tests (uv run pytest)
   - Type checking (uv run mypy src/)
   - Python linting (uv run ruff check .)
   - Code formatting (uv run black .)
3. Fix any failures before proceeding
4. Run again to confirm all green

**If Any Checks Fail:**
- Do NOT proceed to release
- Fix the issue
- Re-run cilicious.sh
- Repeat until clean

**Success Criteria:**
- All tests pass (100%)
- All linting passes
- No type errors
- Code is formatted correctly
- cilicious.sh exits with success (exit code 0)

---

### Task 4.4: Final Documentation Review

**Priority:** MUST FIX (Final Step)
**Files:** All markdown files in repo
**Issue:** Final check that all docs are accurate before release

**Action Steps:**
1. Read README.md - verify accuracy and completeness
2. Read CLAUDE.md - verify current for 1.0
3. Read PLAN.md - verify marked as historical
4. Read CHANGELOG.md - verify 1.0 entry is complete
5. Read CONTRIBUTING.md - verify accurate
6. Read DEPLOYMENT.md - verify accurate
7. Check all docs/ files for accuracy
8. Fix any issues found
9. Run spell check if possible

**Success Criteria:**
- No outdated information
- No placeholder text
- No broken links
- Installation instructions work
- All examples are accurate

---

### Task 4.5: Commit All Changes and Push

**Priority:** MUST FIX (Final Step)
**Issue:** Commit all 1.0 preparation work

**Action Steps:**
1. Review all changed files: `git status`
2. Stage all changes: `git add .`
3. Create comprehensive commit message:
   ```
   Prepare difflicious 1.0.0 release

   - Fix FIXME comments in CSS
   - Consolidate test files to tests/ directory
   - Remove TODO comments in JavaScript
   - Synchronize documentation (PLAN.md, README.md, CLAUDE.md)
   - Update pyproject.toml metadata for production release
   - Improve light mode diff colors (softer green/red)
   - Improve dark mode contrast and visibility
   - Add first-run experience improvements
   - Clarify JavaScript architecture (remove dead code)
   - Update CHANGELOG.md with 1.0 release notes
   - Bump version to 1.0.0

   All tests passing via cilicious.sh.
   Ready for 1.0 release.
   ```
4. Commit: `git commit -m "..."`
5. Push to branch: `git push -u origin claude/difflicious-1.0-release-0135ozM5aXJSzs4Y8py3PTTT`
6. Verify push succeeded

**Success Criteria:**
- All changes committed
- Pushed to remote successfully
- Branch is up to date
- Ready for PR or tagging

---

## Execution Checklist

Use this checklist to track progress:

### Phase 1: Critical Housekeeping (MUST FIX)
- [ ] Task 1.1: Remove FIXME comment in CSS
- [ ] Task 1.2: Consolidate test files to tests/ directory
- [ ] Task 1.3: Remove or complete TODO comments in JavaScript
- [ ] Task 1.4: Synchronize documentation files
- [ ] Task 1.5: Update pyproject.toml metadata

### Phase 2: Theme Refinement (SHOULD FIX)
- [ ] Task 2.1: Improve light mode diff colors
- [ ] Task 2.2: Improve dark mode contrast and visibility
- [ ] Task 2.3: Test both themes side-by-side
- [ ] Task 2.4: Document color system changes

### Phase 3: Final Polish (SHOULD FIX)
- [ ] Task 3.1: Clarify Alpine.js usage or remove dead code
- [ ] Task 3.2: Add basic first-run experience improvements
- [ ] Task 3.3: Review backwards compatibility code (optional)

### Phase 4: Release Preparation (MUST FIX)
- [ ] Task 4.1: Update version to 1.0.0
- [ ] Task 4.2: Update CHANGELOG.md for 1.0 release
- [ ] Task 4.3: Final quality check - run cilicious.sh
- [ ] Task 4.4: Final documentation review
- [ ] Task 4.5: Commit all changes and push

---

## Success Criteria for 1.0 Release

The 1.0 release is ready when:

1. ‚úÖ **All MUST FIX items complete** - No blockers remain
2. ‚úÖ **Theme refinements complete** - Both light and dark modes are pleasant
3. ‚úÖ **All tests passing** - cilicious.sh runs clean
4. ‚úÖ **Documentation accurate** - README, PLAN, CLAUDE in sync
5. ‚úÖ **Version bumped** - 1.0.0 in all files
6. ‚úÖ **CHANGELOG updated** - Complete release notes
7. ‚úÖ **No FIXME/TODO comments** - Production-ready code
8. ‚úÖ **Metadata updated** - pyproject.toml reflects stable status

---

## Out of Scope for 1.0 (Deferred to 1.1+)

The following items from the audit are **NOT** required for 1.0 and should be addressed in future releases:

- JavaScript modularization (1,660 line diff-interactions.js)
- Complete Alpine.js migration
- Keyboard shortcuts
- Server-Sent Events for real-time updates
- Sticky file headers
- Advanced search/filtering
- Performance optimizations for large diffs
- Virtual scrolling / lazy loading
- API versioning
- Request/Response DTOs
- Integration test suite expansion
- Frontend test suite creation
- Pre-commit hooks
- API documentation (OpenAPI/Swagger)

These are valuable improvements but not critical for a user-facing 1.0 release.

---

## Notes for AI Agent Execution

**When working through this plan:**

1. **Execute tasks in order** - Dependencies matter
2. **Run cilicious.sh frequently** - Catch issues early
3. **Commit small, logical changes** - Not one giant commit
4. **Test in browser after UI changes** - Visual verification
5. **Read files before editing** - Understand context
6. **Update this document** - Check off completed tasks
7. **Ask for approval** - If major decision needed, pause and ask

**Common Issues:**

- **Tailwind rebuild:** Always run `pnpm run tailwind:build` after CSS changes
- **Test failures:** Don't proceed if cilicious.sh fails
- **Import errors:** Update imports when moving files
- **Visual regression:** Test in browser, not just tests

**Final Reminder:**

This is a polish and refinement release. Don't over-engineer. The goal is:
- ‚ú® Pleasant, readable themes
- üìñ Accurate documentation
- üéØ Production-ready quality

Ship 1.0 with confidence. Save big refactors for 1.1+.

---

## Approval

This plan is ready for execution once approved by project maintainer.

**Approved by:** _________________
**Date:** _________________
**Notes:** _________________
